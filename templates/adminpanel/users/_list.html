<div class="product-grid">
    {% for u in users %}
    <div class="user-card">
        <div class="user-card-header">
            <div class="user-avatar">
                {% if u.profile.avatar %}
                    <img src="{{ u.profile.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä {{ u.username }}">
                {% else %}
                    <div class="default-avatar">{{ u.username|first|upper }}</div>
                {% endif %}
            </div>
            <div class="user-info">
                <h4>{{ u.username }}</h4>
                <p>{{ u.email }}</p>
                <div class="user-meta">
                    <span class="user-id">#{{ u.id }}</span>
                    {% if u.is_staff %}
                        <span class="user-badge staff">–ê–¥–º–∏–Ω</span>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="user-card-body">
            <div class="user-stats">
                <div class="stat">
                    <span class="stat-label">–ó–∞–∫–∞–∑—ã</span>
                    <span class="stat-value">{{ u.orders.count }}</span>
                </div>
                <div class="stat">
                    <span class="stat-label">–ë–∞–ª–∞–Ω—Å</span>
                    <span class="stat-value">{{ u.loyalty_account.balance|default:0 }} ‚ÇΩ</span>
                </div>
                <div class="stat">
                    <span class="stat-label">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</span>
                    <span class="stat-value">{{ u.date_joined|date:"d.m.Y" }}</span>
                </div>
            </div>
        </div>

        <div class="user-card-footer">
            <div class="user-actions">
                <a href="{% url 'adminpanel:user_detail' u.id %}?mode=view" class="btn secondary" style="font-size:13px; padding:6px 12px;">
                    üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä
                </a>
                <a href="{% url 'adminpanel:user_detail' u.id %}?mode=edit" class="btn" style="font-size:13px; padding:6px 12px;">
                    ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                </a>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="empty-state">
        <div style="text-align:center; padding:40px; color:var(--muted);">
            <div style="font-size:48px; margin-bottom:16px;">üë•</div>
            <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
        </div>
    </div>
    {% endfor %}
</div>
{% if page_obj.has_other_pages %}
<div class="pagination-container">
    <div class="pagination-info">
        <span>–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}</span>
        <span class="pagination-total">–í—Å–µ–≥–æ: {{ page_obj.paginator.count }} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
    </div>
    <div class="pagination-controls">
        {% if page_obj.has_previous %}
            <a class="btn secondary" data-async-page="1" href="?page={{ page_obj.previous_page_number }}{% if base_qs %}&{{ base_qs }}{% endif %}">
                ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è
            </a>
        {% endif %}
        {% if page_obj.has_next %}
            <a class="btn secondary" data-async-page="1" href="?page={{ page_obj.next_page_number }}{% if base_qs %}&{{ base_qs }}{% endif %}">
                –°–ª–µ–¥—É—é—â–∞—è ‚Üí
            </a>
        {% endif %}
    </div>
</div>
{% endif %}

